<!DOCTYPE html>

<html lang="en">

  <head>
    <title>Map interaction tester</title>
    <style>
      html, body {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
      #map-canvas {
        width: 800px;
        height: 480px;
        border: 2px solid black;
        margin: 25px;
      }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script><script>
      var map;
      var atlantisBuilding = new google.maps.LatLng(51.521720, -0.07151);
      var MY_MAPTYPE_ID = 'custom_style';

      function initialize() {
        var featureOpts = [
          {
            stylers: [
              { hue: '#890000' },
              { visibility: 'simplified' },
              { gamma: 0.5 },
              { weight: 0.5 }
            ]
          },
          {
            elementType: 'labels',
            stylers: [
              { visibility: 'off' }
            ]
          },
          {
            featureType: 'water',
            stylers: [
              { color: '#890000' }
            ]
          }
        ];
        var mapOptions = {
          zoom: 16,
          center: atlantisBuilding,
          mapTypeControlOptions: {
            mapTypeIds: [google.maps.MapTypeId.ROADMAP, MY_MAPTYPE_ID]
          },
          mapTypeId: MY_MAPTYPE_ID
        };
        map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
        var styledMapOptions = {
          name: 'Custom Style'
        };
        var customMapType = new google.maps.StyledMapType(featureOpts, styledMapOptions);
        map.mapTypes.set(MY_MAPTYPE_ID, customMapType);

        google.maps.event.addListener(map, 'center_changed', function() {
          $("#lastkey-centre .value").html(map.getCenter());
          alert("Map dragged - requesting points");
        });

      }
      google.maps.event.addDomListener(window, 'load', initialize);


    </script>
  </head>

  <body>
    <div id="map-canvas"></div>
    <div id="map-info">
      <div id="current-centre">
        Current map centre:
        <span class="value"></span>
      </div>
      <div id="lastkey-centre">
        Map centre at point of last request:
        <span class="value"></span>
      </div>
      <div id="key">
        Key:
        <span class="value"></span>
      </div>
    </div>
  </body>

</html>